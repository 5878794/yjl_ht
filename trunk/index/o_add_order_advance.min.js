!function(e){function t(t){for(var r,i,d=t[0],u=t[1],l=t[2],c=0,g=[];c<d.length;c++)i=d[c],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&g.push(a[i][0]),a[i]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(s&&s(t);g.length;)g.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,d=1;d<n.length;d++){var u=n[d];0!==a[u]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={33:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var d=window.webpackJsonp=window.webpackJsonp||[],u=d.push.bind(d);d.push=t,d=d.slice();for(var l=0;l<d.length;l++)t(d[l]);var s=u;o.push([119,0]),n()}({119:function(e,t,n){"use strict";var r=n(0),a=r(n(1)),o=r(n(16)),i=r(n(2)),d=n(4),u=(n(3),n(13)),l=n(10),s=l.ajax,c=l.api,g=n(9),f=n(42),p=n(33),v=(n(32),n(21)),h=n(18),_=n(40),m=n(54),y=(n(8),n(29),n(5));n(22),n(7),n(24),n(6),n(11),n(23),n(12);var b={init:function(){u.showLoadingRun(this,"run")},run:function(){var e=this;return(0,i.default)(a.default.mark((function t(){var n,r,i,d;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return y.set(!0,!0),e.createBTitlesBtn(),n=p(),e.id=n.id,e.type=n.type,e.checkType(),t.next=8,u.getUserInfo();case 8:return t.next=10,v($("#form"));case 10:return t.next=12,s.send([c.order_get_byId({id:e.id})]);case 12:return r=t.sent,i=(0,o.default)(r,1),d=i[0],e.orderNo=d.orderNo,e.orderData=d,console.log(d),e.btnEventBind(),t.next=21,e.backDataToForm(d);case 21:return e.inputEventBind1(),e.inputEventBind2(),t.next=25,u.setOrderTopData(2,d);case 25:case"end":return t.stop()}}),t)})))()},createBTitlesBtn:function(){f.addChildDelFn($("#mortgage_info").get(0),$("#mortgage_info_body"),$("#mortgage_info_item")),f.addDelFn($("#room_info").get(0),$("#room_info_body"),$("#room_info_item")),f.addLevel2BtnFn($("#additional_mortgage").get(0),$("#additional_mortgage_body"),$("#additional_mortgage_item1"),$("#additional_mortgage_item2"))},checkType:function(){3==this.type&&$(".__fdz_no__").remove()},backDataToForm:function(e){return(0,i.default)(a.default.mark((function t(){var n,r,i,d,l,s,c,g,f,p,v,h,_,m,y,b,x,M,w,R;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(l=0,s=Object.entries(e);l<s.length;l++)if(c=(0,o.default)(s[l],2),g=c[0],f=c[1],$.isObject(f))for(p=0,v=Object.entries(f);p<v.length;p++)h=(0,o.default)(v[p],2),_=h[0],m=h[1],e[g+"_"+_]=m;return y=null!==(n=e.additionalMortgagePropertyRightList)&&void 0!==n?n:[],b=[],x=[],y.map((function(e){1==e.category&&x.push(e),2==e.category&&b.push(e)})),e.additionalMortgagePropertyRightList1=x,e.additionalMortgagePropertyRightList2=b,t.next=7,u.setFromGroupVal($("#form"),e);case 7:(M=null!==(r=null===(i=e.orderMortgageExtendAssessment)||void 0===i?void 0:i.attachUrls)&&void 0!==r?r:"")&&(M=u.getRealImageSrc(M),$("#orderMortgageExtendAssessment_attachUrls").get(0).showFiles=M),w=null!==(d=e.orderMortgageExtendMortgageList)&&void 0!==d?d:[],R=$("#mortgage_info_body").find("b-input-file"),w.map((function(e,t){var n,r=null!==(n=e.attachUrls)&&void 0!==n?n:"";r=u.getRealImageSrc(r),R.eq(t).get(0).showFiles=r}));case 11:case"end":return t.stop()}}),t)})))()},inputEventBind1:function(){var e,t,n,r,a=$("#dzbl"),o=a.find(".__data1"),i=a.find(".__data2"),d=a.find(".__data3"),u=a.find(".__data4"),l=$("#orderMortgageExtendAssessment_evaluationPrice"),s=$("#additional_mortgage_body"),c=null!==(e=null===(t=this.orderData)||void 0===t?void 0:t.applyMoney)&&void 0!==e?e:0;o.text(_(c,5));var g=function(){var e=l.get(0).value;n=e*=1e4,i.text(_(e,5)),p()},f=function(){var e=0;s.find('b-input-money[key="evaluationValue"]').each((function(){var t=1*this.value;e+=t})),r=e*=1e4,d.text(_(e,5)),p()},p=function(){var e=c/(n+r)*100||0;u.text(_(e,5)+"%")};g(),f(),m(s.get(0),(function(e){if(0!=(e=e[0]).addedNodes.length)for(var t=0,n=e.addedNodes.length;t<n;t++){var r=e.addedNodes[t];(r=$(r).find('b-input-money[key="evaluationValue"]').eq(0).get(0))&&(r.change=function(){f()})}})),l.get(0).change=g},inputEventBind2:function(){var e=$("#orderRateInfo_consultationRate").get(0),t=$("#orderRateInfo_period").get(0),n=$("#orderRateInfo_consultationFee").get(0),r=$("#orderRateInfo_serviceRate").get(0),a=$("#orderRateInfo_serviceFee").get(0),o=$("#orderRateInfo_warrantFee").get(0),i=$("#orderRateInfo_preferentialFee").get(0),d=$("#orderRateInfo_totalCost").get(0),u=this,l=function(){var l,s;e.value=_(1,2);var c=null!==(l=null===(s=u.orderData)||void 0===s?void 0:s.applyMoney)&&void 0!==l?l:0,g=c*t.value*e.value/100;g=g<3e3?3e3:g,n.value=_(g,5);var f=c*t.value*r.value/100;a.value=_(f,5);var p=1*n.value+1*a.value+1*o.value-1*i.value;d.value=_(p,5)};l(),t.change=function(){l()},o.change=function(){l()},i.change=function(){l()},r.change=function(){l()}},btnEventBind:function(){var e=this;$("#pre").click((function(){g.openPage("./o_add_order_info.html?id="+e.id,h.index_add_step2.width,h.index_add_step2.height)})),$("#next").click((function(){u.showLoadingRun(e,"submitFn")}))},submitFn:function(){var e=this;return(0,i.default)(a.default.mark((function t(){var n,r,o,i,d,l,f;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.getFromGroupVal($("#form"));case 2:return o=t.sent,(o=u.handlerFromDataByObj(o)).additionalMortgagePropertyRightList=null!==(n=o.additionalMortgagePropertyRightList1)&&void 0!==n?n:[].concat(null!==(r=o.additionalMortgagePropertyRightList2)&&void 0!==r?r:[]),delete o.additionalMortgagePropertyRightList1,delete o.additionalMortgagePropertyRightList2,o.id=e.id,o.orderNo=e.orderNo,i=o.orderMortgageExtendAssessment.attachUrls,t.next=12,u.uploadFile(i);case 12:i=t.sent,o.orderMortgageExtendAssessment.attachUrls=i.join(","),d=0,l=o.orderMortgageExtendMortgageList.length;case 15:if(!(d<l)){t.next=24;break}return f=o.orderMortgageExtendMortgageList[d].attachUrls,t.next=19,u.uploadFile(f);case 19:f=t.sent,o.orderMortgageExtendMortgageList[d].attachUrls=f.join(",");case 21:d++,t.next=15;break;case 24:return t.next=26,s.send([c.order_add_step3(o)]);case 26:return t.next=28,g.alert("保存成功!");case 28:g.openPage("./o_add_order_view.html?id="+e.id,h.index_add_step4.width,h.index_add_step4.height);case 29:case"end":return t.stop()}}),t)})))()}};d.run(b)}});