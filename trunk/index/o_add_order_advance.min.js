!function(e){function t(t){for(var r,i,d=t[0],u=t[1],l=t[2],s=0,c=[];s<d.length;s++)i=d[s],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&c.push(a[i][0]),a[i]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(g&&g(t);c.length;)c.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,d=1;d<n.length;d++){var u=n[d];0!==a[u]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={42:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var d=window.webpackJsonp=window.webpackJsonp||[],u=d.push.bind(d);d.push=t,d=d.slice();for(var l=0;l<d.length;l++)t(d[l]);var g=u;o.push([130,0]),n()}({130:function(e,t,n){"use strict";var r=n(0),a=r(n(1)),o=r(n(10)),i=r(n(2)),d=n(6),u=(n(4),n(7)),l=n(5),g=l.ajax,s=l.api,c=n(3),f=n(44),p=n(15),v=(n(14),n(12)),h=n(9),_=n(17),y=n(57),m=(n(11),n(13),n(8));n(23),n(18),n(29),n(16),n(20),n(27),n(19);var b={init:function(){u.showLoadingRun(this,"run")},run:function(){var e=this;return(0,i.default)(a.default.mark((function t(){var n,r,i,d,l,c,f,h;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m.set(!0,!0),e.createBTitlesBtn(),d=p(),e.id=d.id,e.type=d.type,e.checkType(),t.next=8,u.getUserInfo();case 8:return t.next=10,v($("#form"));case 10:return t.next=12,g.send([s.order_get_byId({id:e.id}),s.setting_config_list({type:20})]);case 12:return l=t.sent,c=(0,o.default)(l,2),f=c[0],h=c[1],e.orderNo=f.orderNo,e.orderData=f,h=null!==(n=h[0])&&void 0!==n?n:{},h=null!==(r=h.children)&&void 0!==r?r:[],h=(h=null!==(i=h[0])&&void 0!==i?i:{}).value,e.zxfl=h,e.btnEventBind(),t.next=26,e.backDataToForm(f);case 26:return e.inputEventBind1(),e.inputEventBind2(),t.next=30,u.setOrderTopData(2,f);case 30:0==$("#mortgage_info_body").children().length&&$("#mortgage_info").get(0).body.find(".btn").trigger("click"),e.addAutoInputEvent();case 33:case"end":return t.stop()}}),t)})))()},addAutoInputEvent:function(){var e=$("#orderReturnRepayment_bankName").get(0),t=$("#orderReturnRepayment_bankNo").get(0),n=$("#orderReturnRepayment_openBank").get(0),r=$("#sellerBankSupervision_bankName").get(0),a=$("#sellerBankSupervision_bankNo").get(0),o=$("#sellerBankSupervision_openBank").get(0);e.changeOnInput=function(e){r.value=e},t.changeOnInput=function(e){a.value=e},n.changeOnInput=function(e){o.value=e}},createBTitlesBtn:function(){f.addChildDelFn($("#mortgage_info").get(0),$("#mortgage_info_body"),$("#mortgage_info_item"),!0),f.addDelFn($("#room_info").get(0),$("#room_info_body"),$("#room_info_item")),f.addLevel2BtnFn($("#additional_mortgage").get(0),$("#additional_mortgage_body"),$("#additional_mortgage_item1"),$("#additional_mortgage_item2"))},checkType:function(){3==this.type&&$(".__fdz_no__").remove()},backDataToForm:function(e){return(0,i.default)(a.default.mark((function t(){var n,r,i,d,l,g,s,c,f,p,v,h,_,y,m,b,x,M,R,k;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(l=0,g=Object.entries(e);l<g.length;l++)if(s=(0,o.default)(g[l],2),c=s[0],f=s[1],$.isObject(f))for(p=0,v=Object.entries(f);p<v.length;p++)h=(0,o.default)(v[p],2),_=h[0],y=h[1],e[c+"_"+_]=y;return m=null!==(n=e.additionalMortgagePropertyRightList)&&void 0!==n?n:[],b=[],x=[],m.map((function(e){1==e.category&&x.push(e),2==e.category&&b.push(e)})),e.additionalMortgagePropertyRightList1=x,e.additionalMortgagePropertyRightList2=b,t.next=7,u.setFromGroupVal($("#form"),e);case 7:(M=null!==(r=null===(i=e.orderMortgageExtendAssessment)||void 0===i?void 0:i.attachUrls)&&void 0!==r?r:"")&&(M=u.getRealImageSrc(M),$("#orderMortgageExtendAssessment_attachUrls").get(0).showFiles=M),R=null!==(d=e.orderMortgageExtendMortgageList)&&void 0!==d?d:[],k=$("#mortgage_info_body").find("b-input-file"),R.map((function(e,t){var n,r=null!==(n=e.attachUrls)&&void 0!==n?n:"";r=u.getRealImageSrc(r),k.eq(t).get(0).showFiles=r}));case 11:case"end":return t.stop()}}),t)})))()},inputEventBind1:function(){var e,t,n,r,a=$("#dzbl"),o=a.find(".__data1"),i=a.find(".__data2"),d=a.find(".__data3"),u=a.find(".__data4"),l=$("#orderMortgageExtendAssessment_evaluationPrice"),g=$("#additional_mortgage_body"),s=null!==(e=null===(t=this.orderData)||void 0===t?void 0:t.applyMoney)&&void 0!==e?e:0;o.text(_(s,2));var c=function(){var e=l.get(0).value;n=e*=1e4,i.text(_(e,2)),p()},f=function(){var e=0;g.find('b-input-money[key="evaluationValue"]').each((function(){var t=1*this.value;e+=t})),r=e*=1e4,d.text(_(e,2)),p()},p=function(){var e=s/(n+r)*100||0;u.text(_(e,5,5)+"%")};c(),f(),y(g.get(0),(function(e){if(0!=(e=e[0]).addedNodes.length)for(var t=0,n=e.addedNodes.length;t<n;t++){var r=e.addedNodes[t];(r=$(r).find('b-input-money[key="evaluationValue"]').eq(0).get(0))&&(r.change=function(){f()})}})),l.get(0).change=c},inputEventBind2:function(){var e=$("#orderRateInfo_consultationRate").get(0),t=$("#orderRateInfo_period").get(0),n=$("#orderRateInfo_consultationFee").get(0),r=$("#orderRateInfo_serviceRate").get(0),a=$("#orderRateInfo_serviceFee").get(0),o=$("#orderRateInfo_warrantFee").get(0),i=$("#orderRateInfo_preferentialFee").get(0),d=$("#orderRateInfo_totalCost").get(0),u=this,l=function(){var l,g;e.value=_(u.zxfl,5);var s=null!==(l=null===(g=u.orderData)||void 0===g?void 0:g.applyMoney)&&void 0!==l?l:0,c=s*t.value*e.value/100;c=c<3e3?3e3:c,n.value=_(c,2);var f=s*t.value*r.value/100;a.value=_(f,2);var p=1*n.value+1*a.value+1*o.value-1*i.value;d.value=_(p,2)};l(),t.change=function(){l()},o.change=function(){l()},i.change=function(){l()},r.change=function(){l()}},btnEventBind:function(){var e=this;$("#pre").click((function(){c.openPage("../index/o_add_order_info.html?id="+e.id,h.index_add_step2.width,h.index_add_step2.height),c.closeWin()})),$("#next").click((function(){u.showLoadingRun(e,"submitFn")}))},submitFn:function(){var e=this;return(0,i.default)(a.default.mark((function t(){var n,r,o,i,d,l,f,p,v;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.getFromGroupVal($("#form"));case 2:return d=t.sent,(d=u.handlerFromDataByObj(d)).additionalMortgagePropertyRightList1=null!==(n=d.additionalMortgagePropertyRightList1)&&void 0!==n?n:[],d.additionalMortgagePropertyRightList2=null!==(r=d.additionalMortgagePropertyRightList2)&&void 0!==r?r:[],d.additionalMortgagePropertyRightList=null===(o=d.additionalMortgagePropertyRightList1)||void 0===o?void 0:o.concat(d.additionalMortgagePropertyRightList2),delete d.additionalMortgagePropertyRightList1,delete d.additionalMortgagePropertyRightList2,d.id=e.id,d.orderNo=e.orderNo,l=d.orderMortgageExtendAssessment.attachUrls,t.next=14,u.uploadFile(l);case 14:l=t.sent,d.orderMortgageExtendAssessment.attachUrls=l.join(","),d.orderMortgageExtendMortgageList=null!==(i=d.orderMortgageExtendMortgageList)&&void 0!==i?i:[],f=0,p=d.orderMortgageExtendMortgageList.length;case 18:if(!(f<p)){t.next=27;break}return v=d.orderMortgageExtendMortgageList[f].attachUrls,t.next=22,u.uploadFile(v);case 22:v=t.sent,d.orderMortgageExtendMortgageList[f].attachUrls=v.join(",");case 24:f++,t.next=18;break;case 27:return t.next=29,g.send([s.order_add_step3(d)]);case 29:return t.next=31,c.alert("保存成功!");case 31:c.openPage("../index/o_add_order_view.html?id="+e.id+"&state=1",h.index_add_step4.width,h.index_add_step4.height),c.closeWin();case 33:case"end":return t.stop()}}),t)})))()}};d.run(b)}});