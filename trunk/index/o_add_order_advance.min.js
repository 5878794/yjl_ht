!function(e){function t(t){for(var r,i,d=t[0],l=t[1],u=t[2],g=0,c=[];g<d.length;g++)i=d[g],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&c.push(o[i][0]),o[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(s&&s(t);c.length;)c.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,d=1;d<n.length;d++){var l=n[d];0!==o[l]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={42:0},a=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var d=window.webpackJsonp=window.webpackJsonp||[],l=d.push.bind(d);d.push=t,d=d.slice();for(var u=0;u<d.length;u++)t(d[u]);var s=l;a.push([129,0]),n()}({129:function(e,t,n){"use strict";var r=n(0),o=r(n(1)),a=r(n(10)),i=r(n(2)),d=n(6),l=(n(4),n(7)),u=n(5),s=u.ajax,g=u.api,c=n(3),f=n(44),p=n(15),v=(n(14),n(12)),h=n(9),_=n(17),y=n(57),m=(n(11),n(13),n(8));n(23),n(18),n(29),n(16),n(20),n(27),n(19);var x={init:function(){l.showLoadingRun(this,"run")},run:function(){var e=this;return(0,i.default)(o.default.mark((function t(){var n,r,i,d,u,c,f,h;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m.set(!0,!0),e.createBTitlesBtn(),d=p(),e.id=d.id,e.type=d.type,e.checkType(),t.next=8,l.getUserInfo();case 8:return t.next=10,v($("#form"));case 10:return t.next=12,s.send([g.order_get_byId({id:e.id}),g.setting_config_list({type:20})]);case 12:return u=t.sent,c=(0,a.default)(u,2),f=c[0],h=c[1],e.orderNo=f.orderNo,e.orderData=f,h=null!==(n=h[0])&&void 0!==n?n:{},h=null!==(r=h.children)&&void 0!==r?r:[],h=(h=null!==(i=h[0])&&void 0!==i?i:{}).value,e.zxfl=h,e.btnEventBind(),t.next=26,e.backDataToForm(f);case 26:return e.inputEventBind1(),e.inputEventBind2(),t.next=30,l.setOrderTopData(2,f);case 30:case"end":return t.stop()}}),t)})))()},createBTitlesBtn:function(){f.addChildDelFn($("#mortgage_info").get(0),$("#mortgage_info_body"),$("#mortgage_info_item")),f.addDelFn($("#room_info").get(0),$("#room_info_body"),$("#room_info_item")),f.addLevel2BtnFn($("#additional_mortgage").get(0),$("#additional_mortgage_body"),$("#additional_mortgage_item1"),$("#additional_mortgage_item2"))},checkType:function(){3==this.type&&$(".__fdz_no__").remove()},backDataToForm:function(e){return(0,i.default)(o.default.mark((function t(){var n,r,i,d,u,s,g,c,f,p,v,h,_,y,m,x,b,M,R,w;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(u=0,s=Object.entries(e);u<s.length;u++)if(g=(0,a.default)(s[u],2),c=g[0],f=g[1],$.isObject(f))for(p=0,v=Object.entries(f);p<v.length;p++)h=(0,a.default)(v[p],2),_=h[0],y=h[1],e[c+"_"+_]=y;return m=null!==(n=e.additionalMortgagePropertyRightList)&&void 0!==n?n:[],x=[],b=[],m.map((function(e){1==e.category&&b.push(e),2==e.category&&x.push(e)})),e.additionalMortgagePropertyRightList1=b,e.additionalMortgagePropertyRightList2=x,t.next=7,l.setFromGroupVal($("#form"),e);case 7:(M=null!==(r=null===(i=e.orderMortgageExtendAssessment)||void 0===i?void 0:i.attachUrls)&&void 0!==r?r:"")&&(M=l.getRealImageSrc(M),$("#orderMortgageExtendAssessment_attachUrls").get(0).showFiles=M),R=null!==(d=e.orderMortgageExtendMortgageList)&&void 0!==d?d:[],w=$("#mortgage_info_body").find("b-input-file"),R.map((function(e,t){var n,r=null!==(n=e.attachUrls)&&void 0!==n?n:"";r=l.getRealImageSrc(r),w.eq(t).get(0).showFiles=r}));case 11:case"end":return t.stop()}}),t)})))()},inputEventBind1:function(){var e,t,n,r,o=$("#dzbl"),a=o.find(".__data1"),i=o.find(".__data2"),d=o.find(".__data3"),l=o.find(".__data4"),u=$("#orderMortgageExtendAssessment_evaluationPrice"),s=$("#additional_mortgage_body"),g=null!==(e=null===(t=this.orderData)||void 0===t?void 0:t.applyMoney)&&void 0!==e?e:0;a.text(_(g,5));var c=function(){var e=u.get(0).value;n=e*=1e4,i.text(_(e,5)),p()},f=function(){var e=0;s.find('b-input-money[key="evaluationValue"]').each((function(){var t=1*this.value;e+=t})),r=e*=1e4,d.text(_(e,5)),p()},p=function(){var e=g/(n+r)*100||0;l.text(_(e,5)+"%")};c(),f(),y(s.get(0),(function(e){if(0!=(e=e[0]).addedNodes.length)for(var t=0,n=e.addedNodes.length;t<n;t++){var r=e.addedNodes[t];(r=$(r).find('b-input-money[key="evaluationValue"]').eq(0).get(0))&&(r.change=function(){f()})}})),u.get(0).change=c},inputEventBind2:function(){var e=$("#orderRateInfo_consultationRate").get(0),t=$("#orderRateInfo_period").get(0),n=$("#orderRateInfo_consultationFee").get(0),r=$("#orderRateInfo_serviceRate").get(0),o=$("#orderRateInfo_serviceFee").get(0),a=$("#orderRateInfo_warrantFee").get(0),i=$("#orderRateInfo_preferentialFee").get(0),d=$("#orderRateInfo_totalCost").get(0),l=this,u=function(){var u,s;e.value=_(l.zxfl,2);var g=null!==(u=null===(s=l.orderData)||void 0===s?void 0:s.applyMoney)&&void 0!==u?u:0,c=g*t.value*e.value/100;c=c<3e3?3e3:c,n.value=_(c,5);var f=g*t.value*r.value/100;o.value=_(f,5);var p=1*n.value+1*o.value+1*a.value-1*i.value;d.value=_(p,5)};u(),t.change=function(){u()},a.change=function(){u()},i.change=function(){u()},r.change=function(){u()}},btnEventBind:function(){var e=this;$("#pre").click((function(){c.openPage("../index/o_add_order_info.html?id="+e.id,h.index_add_step2.width,h.index_add_step2.height),c.closeWin()})),$("#next").click((function(){l.showLoadingRun(e,"submitFn")}))},submitFn:function(){var e=this;return(0,i.default)(o.default.mark((function t(){var n,r,a,i,d,u,f,p,v;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.getFromGroupVal($("#form"));case 2:return d=t.sent,(d=l.handlerFromDataByObj(d)).additionalMortgagePropertyRightList1=null!==(n=d.additionalMortgagePropertyRightList1)&&void 0!==n?n:[],d.additionalMortgagePropertyRightList2=null!==(r=d.additionalMortgagePropertyRightList2)&&void 0!==r?r:[],d.additionalMortgagePropertyRightList=null===(a=d.additionalMortgagePropertyRightList1)||void 0===a?void 0:a.concat(d.additionalMortgagePropertyRightList2),delete d.additionalMortgagePropertyRightList1,delete d.additionalMortgagePropertyRightList2,d.id=e.id,d.orderNo=e.orderNo,u=d.orderMortgageExtendAssessment.attachUrls,t.next=14,l.uploadFile(u);case 14:u=t.sent,d.orderMortgageExtendAssessment.attachUrls=u.join(","),d.orderMortgageExtendMortgageList=null!==(i=d.orderMortgageExtendMortgageList)&&void 0!==i?i:[],f=0,p=d.orderMortgageExtendMortgageList.length;case 18:if(!(f<p)){t.next=27;break}return v=d.orderMortgageExtendMortgageList[f].attachUrls,t.next=22,l.uploadFile(v);case 22:v=t.sent,d.orderMortgageExtendMortgageList[f].attachUrls=v.join(",");case 24:f++,t.next=18;break;case 27:return t.next=29,s.send([g.order_add_step3(d)]);case 29:return t.next=31,c.alert("保存成功!");case 31:c.openPage("../index/o_add_order_view.html?id="+e.id+"&state=1",h.index_add_step4.width,h.index_add_step4.height),c.closeWin();case 33:case"end":return t.stop()}}),t)})))()}};d.run(x)}});