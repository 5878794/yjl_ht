!function(e){function t(t){for(var o,i,s=t[0],l=t[1],d=t[2],u=0,p=[];u<s.length;u++)i=s[u],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&p.push(n[i][0]),n[i]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);for(c&&c(t);p.length;)p.shift()();return a.push.apply(a,d||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],o=!0,s=1;s<r.length;s++){var l=r[s];0!==n[l]&&(o=!1)}o&&(a.splice(t--,1),e=i(i.s=r[0]))}return e}var o={},n={57:0},a=[];function i(t){if(o[t])return o[t].exports;var r=o[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=o,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(r,o,function(t){return e[t]}.bind(null,o));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var c=l;a.push([148,0]),r()}({148:function(e,t,r){"use strict";var o=r(0),n=o(r(1)),a=o(r(9)),i=o(r(2)),s=r(7),l=r(42),d=(r(4),r(5)),c=r(6),u=c.ajax,p=c.api,f=r(3),h=r(46),m=(r(14),r(15)),y=r(12),v=r(17),g=(r(10),r(11),r(13)),b=r(8);f.loading=h.loading,r(16),r(19);var w={init:function(){d.showLoadingRun(this,"run")},getParam:function(){var e=m();this.id=e.id,this.orderNo=e.orderNo,this.type=e.type,this.currentNodeKey=e.currentNodeKey;var t=window.sessionStorage.getItem("userInfo")||"{}",r=JSON.parse(t);r.token?(window.token=r.token,window.companyId=r.companyId,window.userName=r.userName,window.orderSearchPrivilegeType=r.orderSearchPrivilegeType,window.orderCreatePrivilegeType=r.orderCreatePrivilegeType,window.userInfo=r):window.location.replace("./index.html")},run:function(){var e=this;return(0,i.default)(n.default.mark((function t(){var r,o,i,s,l,d;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.getParam(),t.next=3,u.send([p.order_get_byId({id:e.id})]);case 3:return r=t.sent,o=(0,a.default)(r,1),i=o[0],t.next=8,y("businessType");case 8:return e.bussinessDist=t.sent,t.next=11,y("orderState");case 11:e.orderStateDist=t.sent,console.log(i),s=$("#warran"),l=$("#myorder"),d=$("#draft"),1==e.type?(b.phoneSet1(60),s.removeClass("hidden"),l.remove(),d.remove(),e.appendTypeDom("权证","blue"),e.bindData(i)):2==e.type?(b.phoneSet1(60),s.remove(),l.removeClass("hidden"),d.remove(),e.bindData(i)):(b.phoneSet1(90),s.remove(),l.remove(),d.removeClass("hidden"),e.appendTypeDom("草稿","red"),e.bindData1(i)),e.bindBtnEvent();case 16:case"end":return t.stop()}}),t)})))()},appendTypeDom:function(e,t){var r=$('<div class="box_hcc">'+e+"</div>"),o=$("#item");o.css({position:"relative"}),r.css({position:"absolute",right:"3px",top:"50%",width:"24px",height:"40px",marginTop:"-20px",border:"1px solid "+t,color:t,textAlign:"center"}),o.append(r)},bindData:function(e){var t,r,o,n=$("#item").find("a");n.eq(0).text(null===(t=e.mainOrderApplyInfo)||void 0===t?void 0:t.name),n.eq(1).text(null===(r=e.mainOrderApplyInfo)||void 0===r?void 0:r.mobile),n.eq(2).text(this.bussinessDist[e.businessKey]);var a=e.applyMoney;a=v(a/=1e4,2)+"万元",n.eq(3).text(a),n.eq(4).text(this.orderStateDist[e.orderStatus]),n.eq(5).text(g.getDate1(e.flowNodeUpdateTime||"")),$("#info").data({data:e}),$("#history").data({data:e}),$("#tel").attr({href:"tel:"+(null===(o=e.mainOrderApplyInfo)||void 0===o?void 0:o.mobile)})},bindData1:function(e){var t,r,o=$("#item").find("a");o.eq(0).text(null===(t=e.mainOrderApplyInfo)||void 0===t?void 0:t.name),o.eq(2).text(this.bussinessDist[e.businessKey]);var n=e.applyMoney;n=v(n/=1e4,2)+"万元",o.eq(1).text(n),o.eq(3).text(g.getDate1(e.flowNodeUpdateTime||"")),$("#info").data({data:e}),$("#history").data({data:e}),$("#tel").attr({href:"tel:"+(null===(r=e.mainOrderApplyInfo)||void 0===r?void 0:r.mobile)}),(e.orderClientMaterialList||[]).map((function(e){1==e.attachType&&(console.log(d.getRealImageSrc(e.attachUrls)),$("#attachUrls1").get(0).showFiles=d.getRealImageSrc(e.attachUrls)),2==e.attachType&&(console.log(d.getRealImageSrc(e.attachUrls)),$("#attachUrls2").get(0).showFiles=d.getRealImageSrc(e.attachUrls)),3==e.attachType&&(console.log(d.getRealImageSrc(e.attachUrls)),$("#attachUrls3").get(0).showFiles=d.getRealImageSrc(e.attachUrls))}))},bindBtnEvent:function(){var e=$("#info"),t=$("#history"),r=$("#close"),o=$("#submit"),n=$("#submit1"),a=this;l(e).myclickok((function(){var e=$(this).data("data").id;window.location.href="./order_info.html?id=".concat(e,"&state=").concat(0)})),l(t).myclickok((function(){var e=$(this).data("data").orderNo;window.location.href="./history_info.html?orderNo=".concat(e)})),l(r).myclickok((function(){window.history.go(-1)})),l(o).myclickok((function(){d.showLoadingRun(d,"reviewSubmit",{formDom:$("#form"),orderNo:a.orderNo,state:1,currentNodeKey:a.currentNodeKey})})),l(n).myclickok((function(){d.showLoadingRun(a,"submitFile")}))},submitFile:function(){var e=this;return(0,i.default)(n.default.mark((function t(){var r,o,a,i,s;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.getFromVal($("#form"));case 2:return r=t.sent,t.next=5,d.uploadFile(r.attachUrls1);case 5:return o=t.sent,t.next=8,d.uploadFile(r.attachUrls2);case 8:return a=t.sent,t.next=11,d.uploadFile(r.attachUrls3);case 11:return i=t.sent,s=[{attachUrl:o.join(","),orderNo:e.orderNo,type:1},{attachUrl:a.join(","),orderNo:e.orderNo,type:2},{attachUrl:i.join(","),orderNo:e.orderNo,type:3}],console.log(s),t.next=16,u.send([p.mobile_file_submit(s)]);case 16:return t.next=18,f.alert("操作成功!");case 18:f.closeWin();case 19:case"end":return t.stop()}}),t)})))()}};s.run(w)}});