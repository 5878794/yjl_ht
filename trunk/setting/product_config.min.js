!function(t){function e(e){for(var r,i,c=e[0],d=e[1],u=e[2],l=0,f=[];l<c.length;l++)i=c[l],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&f.push(a[i][0]),a[i]=0;for(r in d)Object.prototype.hasOwnProperty.call(d,r)&&(t[r]=d[r]);for(s&&s(e);f.length;)f.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,c=1;c<n.length;c++){var d=n[c];0!==a[d]&&(r=!1)}r&&(o.splice(e--,1),t=i(i.s=n[0]))}return t}var r={},a={71:0},o=[];function i(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var c=window.webpackJsonp=window.webpackJsonp||[],d=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var s=d;o.push([160,0]),n()}({160:function(t,e,n){"use strict";var r=n(0),a=r(n(1)),o=r(n(11)),i=r(n(2)),c=n(6),d=(n(4),n(10)),u=n(5),s=u.ajax,l=u.api,f=n(7),p=n(3),h=n(12),g=n(9);n(8);n(30),n(34),n(32),n(18),n(29),n(46);var v={init:function(){f.showLoadingRun(this,"run")},run:function(){var t=this;return(0,i.default)(a.default.mark((function e(){var n,r,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.getUserInfo();case 2:return e.next=4,t.setDist();case 4:return t.bindTitleBtn(),e.next=7,s.send([l.org_list({pageNum:1,pageSize:99999})]);case 7:if(n=e.sent,r=(0,o.default)(n,1),(i=(i=r[0]).list).map((function(t){t.name=t.organizationName})),t.createList(i),0!=i.length){e.next=15;break}return e.abrupt("return");case 15:$("#list").get(0).triggerClick(0);case 17:case"end":return e.stop()}}),e)})))()},setDist:function(){var t=this;return(0,i.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("productType");case 2:t.productTypeDist=e.sent;case 3:case"end":return e.stop()}}),e)})))()},bindTitleBtn:function(){var t=$("#b_title").get(0);t.btnData=[{name:"新增",type:"btn1",style:{color:"#5576f0"}}],t.clickFn=function(){p.openPage("../setting/o_add.html?name=机构名&type=2",g.setting_add_role.width,g.setting_add_role.height)}},createList:function(t){var e=$("#list").get(0),n=this;e.data=t,e.del=function(){var t=(0,i.default)(a.default.mark((function t(e){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.confirm("您确定要删除机构 ".concat(e.name,"?"));case 2:if(!t.sent){t.next=5;break}p.loading.show(),n.delOrg(e).then((function(t){p.loading.hide()})).catch((function(t){p.loading.hide(),p.alert(t)}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.click=function(t){n.orgData=t,p.loading.show(),n.showProduct(t).then((function(t){p.loading.hide()})).catch((function(t){p.loading.hide(),p.alert(t)}))}},delOrg:function(t){return(0,i.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.send([l.org_del({organizationId:t.id})]);case 2:return e.next=4,p.alert("删除成功");case 4:p.refreshPage();case 5:case"end":return e.stop()}}),e)})))()},showProduct:function(t){var e=this;return(0,i.default)(a.default.mark((function n(){var r,i,c,d,u,f,p;return a.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(r=$("#list_body")).html(""),i=$('<b-title1 name="'+t.name+'"></b-title1>'),r.append(i),e.createListTitle(i.get(0),t),n.next=7,s.send([l.org_product_list({organizationId:t.id,pageNum:1,pageSize:99999})]);case 7:c=n.sent,d=(0,o.default)(c,1),u=(u=d[0]).list,f=$("<b-table-list></b-table-list>"),(p=$('<div class="index_list"></div>')).append(f),r.append(p),e.createList1(f.get(0),u),r.removeClass("hidden");case 16:case"end":return n.stop()}}),n)})))()},createListTitle:function(t,e){t.btnData=[{name:"新增",type:"btn1",style:{color:"#5576f0"}}],t.clickFn=function(){var t="../setting/o_add_product.html?orgId=".concat(e.id,"&name=").concat(e.organizationName);p.openPage(t,g.setting_add_product.width,g.setting_add_product.height)}},createList1:function(t,e){var n=this,r=this;d.set(t,"setting_product"),t.listBody.removeClass("boxflex1"),e.map((function(t){t._productType=n.productTypeDist[t.productType],t._minMoney="最小额度:"+t.minMoney,t._maxMoney="最大额度:"+t.maxMoney,t._castRate="成本费率:"+t.castRate,t._castServiceRate="服务费:"+t.castServiceRate})),t.show(e),t.body.find(".__key8__").each((function(){$(this).addClass("box_hcc").html("");var t=$(this).parent().data("data"),e=$('<div data-type="edit" class="box_hcc hover">编辑</div>'),n=$('<div data-type="del" class="box_hcc hover">删除</div>');e.css({width:"60px",height:"24px",borderRadius:"5px",background:"#5576f0",color:"#fff",margin:"0 5px",fontSize:"14px"}).data({data:t}),n.css({width:"60px",height:"24px",borderRadius:"5px",background:"red",color:"#fff",margin:"0 5px",fontSize:"14px"}).data({data:t}),$(this).append(e).append(n),e.click((function(){var t=$(this).data("data");console.log(t),console.log(r.orgData);var e="../setting/o_add_product.html?id=".concat(t.id,"&orgId=").concat(r.orgData.id,"&name=").concat(r.orgData.organizationName);console.log(e),p.openPage(e,g.setting_add_product.width,g.setting_add_product.height)})),n.click((0,i.default)(a.default.mark((function t(){var e;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=$(this).data("data"),t.next=3,p.confirm("您确定要删除产品 ".concat(e.productName,"?"));case 3:if(!t.sent){t.next=6;break}p.loading.show(),r.delProduct(e).then((function(t){p.loading.hide()})).catch((function(t){p.loading.hide(),p.alert(t)}));case 6:case"end":return t.stop()}}),t,this)}))))}))},delProduct:function(t){return(0,i.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.send([l.org_product_del({productId:t.id})]);case 2:return e.next=4,p.alert("删除成功");case 4:p.refreshPage();case 5:case"end":return e.stop()}}),e)})))()}};c.run(v)}});