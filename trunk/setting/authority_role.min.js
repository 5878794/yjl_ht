!function(e){function t(t){for(var i,o,l=t[0],c=t[1],d=t[2],u=0,f=[];u<l.length;u++)o=l[u],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&f.push(r[o][0]),r[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);for(s&&s(t);f.length;)f.shift()();return a.push.apply(a,d||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,l=1;l<n.length;l++){var c=n[l];0!==r[c]&&(i=!1)}i&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var i={},r={52:0},a=[];function o(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var l=window.webpackJsonp=window.webpackJsonp||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var s=c;a.push([138,0]),n()}({138:function(e,t,n){"use strict";var i=n(0),r=i(n(1)),a=i(n(8)),o=i(n(2)),l=n(6),c=(n(4),n(11),n(3)),d=n(5),s=d.ajax,u=d.api,f=n(9),p=n(10);n(7);n(30),n(18),n(139),n(45);var h={nowRoleId:"",init:function(){f.showLoadingRun(this,"run")},run:function(){var e=this;return(0,o.default)(r.default.mark((function t(){var n,i,o,l;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.createBTitlesBtn(),t.next=3,f.getUserInfo();case 3:return t.next=5,s.send([u.role_get_list({pageNum:1,pageSize:99999})]);case 5:return i=t.sent,o=(0,a.default)(i,1),(l=(l=o[0]).list).map((function(e){e.name=e.roleName})),e.createRoleList(l),e.nowRoleId=null===(n=l[0])||void 0===n?void 0:n.id,$("#list").get(0).chooseRowNumber(0),t.next=16,e.createPrivilegeList();case 16:case"end":return t.stop()}}),t)})))()},createPrivilegeList:function(){var e=this;return(0,o.default)(r.default.mark((function t(){var n,i,o,l;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.nowRoleId){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,s.send([u.privilege_list({roleId:n})]);case 5:i=t.sent,o=(0,a.default)(i,1),l=o[0],e.createRole(l);case 9:case"end":return t.stop()}}),t)})))()},createBTitlesBtn:function(){var e=$("#b_title").get(0);e.btnData=[{name:"新增",type:"btn1",style:{color:"#5576f0"}}],e.clickFn=function(){c.openPage("../setting/o_add.html?name=角色名&type=1",p.setting_add_role.width,p.setting_add_role.height)}},createRoleList:function(e){var t=$("#list").get(0),n=this;t.data=e,t.del=function(){var e=(0,o.default)(r.default.mark((function e(t){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.confirm("您确定要删除角色 ".concat(t.name,"?"));case 2:if(!e.sent){e.next=5;break}c.loading.show(),n.delRole(t).then((function(e){c.loading.hide()})).catch((function(e){c.loading.hide(),c.alert(e)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.click=function(e){n.nowRoleId=e.id,f.showLoadingRun(n,"createPrivilegeList")}},createRole:function(e){var t=$("#role").get(0),n=this;t.data=e,t.submit=function(e,t){c.loading.show(),n.mdfUserRole(e).then((function(e){c.loading.hide()})).catch((function(n){t.val=!t.val,e.hasPrivilege=t.val?1:0,c.loading.hide(),c.alert(n)}))}},mdfUserRole:function(e){var t=this;return(0,o.default)(r.default.mark((function n(){return r.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.send([u.privilege_mdf({roleId:t.nowRoleId,privileges:[e]})]);case 2:c.alert("修改成功!");case 3:case"end":return n.stop()}}),n)})))()},delRole:function(e){return(0,o.default)(r.default.mark((function t(){return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.send([u.role_del({roleId:e.id})]);case 2:return t.next=4,c.alert("删除成功");case 4:c.refreshPage();case 5:case"end":return t.stop()}}),t)})))()}};l.run(h)},139:function(e,t,n){"use strict";var i=n(0),r=i(n(22)),a=i(n(36)),o=i(n(23)),l=i(n(27)),c=i(n(28)),d=i(n(24)),s=i(n(31));function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,c.default)(this,n)}}n(41),n(52);var f=n(33),p=n(37),h=function(e){(0,l.default)(n,e);var t=u(n);function n(){var e;(0,r.default)(this,n),(e=t.call(this)).body=null,e.shadow=e.attachShadow({mode:"open"});var i=f("../res/css/all.css");e.shadow.appendChild(i),e.createStyle();var o=p(e.cssText);return e.shadow.appendChild(o),e.cacheData={},e.name=$((0,a.default)(e)).attr("name")||"",e.userClick=function(){},e.createElement(),e.shadow.appendChild(e.body.get(0)),e.bindEvent(),e}return(0,o.default)(n,[{key:"connectedCallback",value:function(){}}]),(0,o.default)(n,[{key:"createElement",value:function(){var e=$('<div class="body box_sct"></div>'),t=$('<div class="border box_sct"></div>'),n=$('<div class="box_hlc titleBody"></div>'),i=$('<div class="boxflex1 title">'+this.name+"</div>"),r=$('<div class="submit box_hcc gray">提交</div>'),a=$('<div class="box_hlt listBody"></div>'),o=$('<div class="box_slt cel1"></div>'),l=$('<div class="cel2 boxflex1 box_slt">'),c=$('<div class="item1 box_hlc hover"></div>'),d=$('<div class="box_hlc item2"></div>'),s=$('<div class="cel2_1 box_hlc diandian"></div>'),u=$('<div class="cel2_2 box_hlc diandian"></div>'),f=$('<div class="cel2_3 box_hcc diandian"></div>'),p=$('<div class="cel2_4 box_hcc"></div>');n.append(i).append(r),a.append(o).append(l),d.append(s).append(u).append(f).append(p),t.append(n).append(a),e.append(t),this.listBody1=o,this.listBody2=l,this.btn=r,this.item1=c,this.item2=d,this.body=e}},{key:"createStyle",value:function(){this.cssText=[".body{width:100%; padding:20px; box-sizing:border-box;}",".border{border:1px solid rgb(234,243,251);; width:100%;}",".titleBody{width:100%;height:34px;font-size:14px;background:rgb(234,243,251);}",".title{font-weight:bold;padding-left:20px;}",".submit{color:#fff; background:#5576f0; width:50px; height:24px; border-radius:5px; margin:0 10px;}",".listBody{width:100%;position:relative;}",".cel1{width:100px;background:#f9f9f9;font-size:14px;color:#333;border-right:1px solid rgb(234,243,251);;position:absolute;left:0;top:0;bottom:0;}",".cel2{background:#fff;padding-left:100px;}",".item1,.item2{width:100%; height:40px;padding:10px;border-top:1px solid rgb(234,243,251);;border-bottom:1px solid rgb(234,243,251);;}",".item1{border-color:transparent;}",".item2{border-top:none;padding:none;}",".cel1 .select{border-color:rgb(234,243,251);;background:#fff;color:#5576f0;height:41px;position:relative;top:-1px;}",".cel2_1,.cel2_2,.cel2_3,.cel2_4{height:40px;border-right:1px solid rgb(234,243,251);;padding:0 10px;font-size:14px;}",".cel2_1,.cel2_2{width:34%;}",".cel2_3,.cel2_4{width:16%;color:#aaa;}",".cel2_4{border:none;}",".gray{display:none;}","b-switch{display:block; width:60px; height:24px;}"].join("")}},{key:"bindEvent",value:function(){var e=this;this.btn.click((function(){var t=e.getRs(e.cacheData);e.userClick(t)}))}},{key:"getRs",value:function(e){var t=[];return e.map((function(e){var n=e.categoryName;(e.children||[]).map((function(e){var i=e.categoryName;(e.privilegeList||[]).map((function(e){e.__level1__=n,e.__level2__=i,e.__level3__=e.privilegeName,t.push(e)}))}))})),t}},{key:"showLevel2",value:function(e,t){var n=this.listBody2,i=this.item2,r=this;n.html(""),e.map((function(e){var a=e.categoryName;(e.privilegeList||[]).map((function(o,l){var c=i.clone().data({level3:o,level2:e,level1:t});0==l&&c.find(".cel2_1").text(a),c.find(".cel2_2").text(o.privilegeName),c.find(".cel2_3").text(o.remark);var d=$("<b-switch></b-switch>").get(0);d.val=1==o.hasPrivilege,d.checkBgColor="#5576f0",c.find(".cel2_4").append(d),n.append(c),d.changeFn=function(e){var t=$(this).parent().parent(),n=t.data("level3");t.data("level2"),t.data("level1");n.hasPrivilege=e?1:0,r.userClick(n,this)}}))}))}},{key:"reSetTableStyle",value:function(){var e=this.body.find(".listBody"),t=this.body.find(".cel1"),n=this.body.find(".cel2"),i=40*t.find(".item1").length,r=n.height(),a=i>r?i:r;e.css({height:a+"px"})}},{key:"data",set:function(e){e=e||[],this.cacheData=e;var t=this.listBody1,n=this.item1,i=this;t.html(""),e.map((function(e){var r=n.clone().data({data:e});r.text(e.categoryName),t.append(r),r.click((function(){var e=$(this).data("data"),t=e.children;i.listBody1.find("div").removeClass("select"),$(this).addClass("select"),i.showLevel2(t,e),i.reSetTableStyle()}))})),this.listBody1.find("div").eq(0).trigger("click")}},{key:"submit",set:function(e){e=e||function(){},this.userClick=e}}]),n}((0,s.default)(HTMLElement));customElements.get("b-role-authority")||customElements.define("b-role-authority",h)}});