!function(t){function e(e){for(var a,i,c=e[0],d=e[1],u=e[2],l=0,f=[];l<c.length;l++)i=c[l],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&f.push(r[i][0]),r[i]=0;for(a in d)Object.prototype.hasOwnProperty.call(d,a)&&(t[a]=d[a]);for(s&&s(e);f.length;)f.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],a=!0,c=1;c<n.length;c++){var d=n[c];0!==r[d]&&(a=!1)}a&&(o.splice(e--,1),t=i(i.s=n[0]))}return t}var a={},r={46:0},o=[];function i(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=a,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var c=window.webpackJsonp=window.webpackJsonp||[],d=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var s=d;o.push([130,0]),n()}({130:function(t,e,n){"use strict";var a=n(0),r=a(n(1)),o=a(n(35)),i=a(n(2)),c=n(4),d=(n(3),n(16)),u=n(33),s=u.ajax,l=u.api,f=n(37),p=n(32),h=n(45),g=n(43);n(5);n(19),n(24),n(23),n(7),n(18),n(39);var v={init:function(){this.run().then((function(t){})).catch((function(t){throw t}))},run:function(){var t=this;return(0,i.default)(r.default.mark((function e(){var n,a;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.getUserInfo();case 2:return t.bindTitleBtn(),e.next=5,s.send([l.company_list({pageNum:1,pageSize:99999})]);case 5:n=e.sent,a=(0,o.default)(n,1),(a[0].list||[]).map((function(t){t.name=t.companyName})),t.createList(orgList);case 11:case"end":return e.stop()}}),e)})))()},setDist:function(){var t={};h.productType.map((function(e){t[e.value]=e.name})),this.productTypeDist=t},bindTitleBtn:function(){var t=$("#b_title").get(0);t.btnData=[{name:"新增",type:"btn1",style:{color:"#5576f0"}}],t.clickFn=function(){p.openPage("o_add.html?name=机构名&type=2",g.setting_add_role.width,g.setting_add_role.height)}},createList:function(t){var e=$("#list").get(0),n=this;e.data=t,e.del=function(){var t=(0,i.default)(r.default.mark((function t(e){return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.confirm("您确定要删除机构 ".concat(e.name,"?"));case 2:if(!t.sent){t.next=5;break}p.loading.show(),n.delOrg(e).then((function(t){p.loading.hide()})).catch((function(t){p.loading.hide(),p.alert(t)}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.click=function(t){n.orgData=t,p.loading.show(),n.showProduct(t).then((function(t){p.loading.hide()})).catch((function(t){p.loading.hide(),p.alert(t)}))}},delOrg:function(t){return(0,i.default)(r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.send([l.org_del({organizationId:t.id})]);case 2:return e.next=4,p.alert("删除成功");case 4:p.refreshPage();case 5:case"end":return e.stop()}}),e)})))()},showProduct:function(t){var e=this;return(0,i.default)(r.default.mark((function n(){var a,i,c,d,u,f,p;return r.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(a=$("#list_body")).html(""),i=$('<b-title1 name="'+t.name+'"></b-title1>'),a.append(i),e.createListTitle(i.get(0),t),n.next=7,s.send([l.org_product_list({organizationId:t.id,pageNum:1,pageSize:99999})]);case 7:c=n.sent,d=(0,o.default)(c,1),u=(u=d[0]).list,f=$("<b-table-list></b-table-list>"),(p=$('<div class="index_list"></div>')).append(f),a.append(p),e.createList1(f.get(0),u),a.removeClass("hidden");case 16:case"end":return n.stop()}}),n)})))()},createListTitle:function(t,e){t.btnData=[{name:"新增",type:"btn1",style:{color:"#5576f0"}}],t.clickFn=function(){var t="o_add_product.html?orgId=".concat(e.id,"&name=").concat(e.organizationName);p.openPage(t,g.setting_add_product.width,g.setting_add_product.height)}},createList1:function(t,e){var n=this,a=this;d.set(t,"setting_product"),t.listBody.removeClass("boxflex1"),e.map((function(t){t._productType=n.productTypeDist[t.productType],t._minMoney="最小额度:"+t.minMoney,t._maxMoney="最大额度:"+t.maxMoney,t._castRate="成本费率:"+t.castRate,t._castServiceRate="服务费:"+t.castServiceRate})),t.show(e),t.body.find(".__key8__").each((function(){$(this).addClass("box_hcc").html("");var t=$(this).parent().data("data"),e=$('<div data-type="edit" class="box_hcc hover">编辑</div>'),n=$('<div data-type="del" class="box_hcc hover">删除</div>');e.css({width:"60px",height:"24px",borderRadius:"5px",background:"#5576f0",color:"#fff",margin:"0 5px",fontSize:"14px"}).data({data:t}),n.css({width:"60px",height:"24px",borderRadius:"5px",background:"red",color:"#fff",margin:"0 5px",fontSize:"14px"}).data({data:t}),$(this).append(e).append(n),e.click((function(){var t=$(this).data("data");console.log(t),console.log(a.orgData);var e="o_add_product.html?id=".concat(t.id,"&orgId=").concat(a.orgData.id,"&name=").concat(a.orgData.organizationName);console.log(e),p.openPage(e,g.setting_add_product.width,g.setting_add_product.height)})),n.click((0,i.default)(r.default.mark((function t(){var e;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=$(this).data("data"),t.next=3,p.confirm("您确定要删除产品 ".concat(e.productName,"?"));case 3:if(!t.sent){t.next=6;break}p.loading.show(),a.delProduct(e).then((function(t){p.loading.hide()})).catch((function(t){p.loading.hide(),p.alert(t)}));case 6:case"end":return t.stop()}}),t,this)}))))}))},delProduct:function(t){return(0,i.default)(r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.send([l.org_product_del({productId:t.id})]);case 2:return e.next=4,p.alert("删除成功");case 4:case"end":return e.stop()}}),e)})))()}};c.run(v)}});