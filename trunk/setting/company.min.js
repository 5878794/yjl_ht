!function(e){function t(t){for(var r,o,u=t[0],c=t[1],s=t[2],d=0,f=[];d<u.length;d++)o=u[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&f.push(a[o][0]),a[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(l&&l(t);f.length;)f.shift()();return i.push.apply(i,s||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,u=1;u<n.length;u++){var c=n[u];0!==a[c]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={68:0},i=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var u=window.webpackJsonp=window.webpackJsonp||[],c=u.push.bind(u);u.push=t,u=u.slice();for(var s=0;s<u.length;s++)t(u[s]);var l=c;i.push([159,0]),n()}({159:function(e,t,n){"use strict";var r=n(0),a=r(n(1)),i=r(n(10)),o=r(n(2)),u=n(6),c=(n(4),n(11),n(5)),s=c.ajax,l=c.api,d=n(7),f=n(3),p=(n(12),n(9));n(8);n(30),n(34),n(33),n(18),n(29),n(48);var h={choose:0,init:function(){d.showLoadingRun(this,"run")},run:function(){var e=this;return(0,o.default)(a.default.mark((function t(){var n,r,o,u;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.getUserInfo();case 2:return e.bindTitleBtn(),t.next=5,s.send([l.company_list({pageNum:1,pageSize:99999})]);case 5:if(n=t.sent,r=(0,i.default)(n,1),o=(o=r[0]).list||[],u=null,o.map((function(e,t){1==e.id&&(u=t),e.name=e.companyName})),(u||0==u)&&o.splice(u,1),e.createList(o),0!=o.length){t.next=15;break}return t.abrupt("return");case 15:$("#list").get(0).triggerClick(e.choose);case 17:case"end":return t.stop()}}),t)})))()},bindTitleBtn:function(){var e=$("#b_title").get(0);e.btnData=[{name:"新增",type:"btn1",style:{color:"#5576f0"}}],e.clickFn=function(){f.openPage("../setting/o_add.html?name=公司名&type=3",p.setting_add_role.width,p.setting_add_role.height)}},createList:function(e){var t=$("#list").get(0),n=this;t.data=e,t.del=function(){var e=(0,o.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.confirm("您确定要删除公司 ".concat(t.name,"?"));case 2:if(!e.sent){e.next=5;break}f.loading.show(),n.delCompany(t).then((function(e){f.loading.hide()})).catch((function(e){f.loading.hide(),f.alert(e)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.click=function(e){n.choose=e.i,n.companyData=e,f.loading.show(),n.showDepartment(e).then((function(e){f.loading.hide()})).catch((function(e){f.loading.hide(),f.alert(e)}))}},delCompany:function(e){var t=this;return(0,o.default)(a.default.mark((function n(){return a.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.send([l.company_del({companyId:e.id})]);case 2:return n.next=4,f.alert("删除成功");case 4:d.showLoadingRun(t,"run");case 5:case"end":return n.stop()}}),n)})))()},showDepartment:function(e){var t=this;return(0,o.default)(a.default.mark((function n(){var r,u,c,d,p,h,m,g;return a.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=$("#list_body"),u=t,r.html(""),c=$('<b-title name="'+e.name+'"></b-title>'),r.append(c),t.createListTitle(c.get(0),e),n.next=7,s.send([l.department_list({companyId:e.id,pageNum:1,pageSize:99999})]);case 7:d=n.sent,p=(0,i.default)(d,1),h=(h=p[0]).list||[],m=$("<b-role-list></b-role-list>"),(g=$('<div class="index_list"></div>')).append(m),r.append(g),h.map((function(e){e.name=e.deptName})),(m=m.get(0)).data=h,m.del=function(){var e=(0,o.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.confirm("您确定要删除部门 ".concat(t.name,"?"));case 2:if(!e.sent){e.next=5;break}f.loading.show(),u.delDepartment(t).then((function(e){f.loading.hide()})).catch((function(e){f.loading.hide(),f.alert(e)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.removeClass("hidden");case 19:case"end":return n.stop()}}),n)})))()},createListTitle:function(e,t){e.btnData=[{name:"新增",type:"btn1",style:{color:"#5576f0"}}],e.clickFn=function(){f.openPage("../setting/o_add.html?name=部门名&type=4&companyId="+t.id,p.setting_add_role.width,p.setting_add_role.height)}},delDepartment:function(e){var t=this;return(0,o.default)(a.default.mark((function n(){return a.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.send([l.department_del({deptId:e.id})]);case 2:return n.next=4,f.alert("删除成功");case 4:d.showLoadingRun(t,"run");case 5:case"end":return n.stop()}}),n)})))()},refreshList:function(){d.showLoadingRun(this,"run")}};window.refreshList=function(){h.refreshList()},u.run(h)}});