!function(e){function t(t){for(var r,i,c=t[0],s=t[1],d=t[2],l=0,p=[];l<c.length;l++)i=c[l],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);for(u&&u(t);p.length;)p.shift()();return a.push.apply(a,d||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,c=1;c<n.length;c++){var s=n[c];0!==o[s]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={3:0},a=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var c=window.webpackJsonp=window.webpackJsonp||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var u=s;a.push([88,0]),n()}({88:function(e,t,n){"use strict";var r=n(0),o=r(n(1)),a=r(n(8)),i=r(n(2)),c=n(5),s=(n(4),n(9)),d=n(6),u=d.ajax,l=d.api,p=n(3),f=(n(14),n(15)),h=n(10),g=(n(11),n(12)),y=(n(17),n(13)),v=(n(37),n(7));n(27),n(89),n(18),n(29),n(16),n(28),n(19);var m={init:function(){s.showLoadingRun(this,"run")},run:function(){var e=this;return(0,i.default)(o.default.mark((function t(){var n,r,i,c,d,p,h;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return v.set(!0,!0),n=f(),e.id=n.id,e.orderNo=n.orderNo,e.currentNodeKey=n.currentNodeKey,e.clientCategory=n.clientCategory,e.addBtnEvent(),t.next=9,s.getUserInfo();case 9:return t.next=11,g("clientType",!0);case 11:return e.clientCategoryDist=t.sent,e.createBTitlesBtn(),t.next=15,u.send([l.order_get_byId({id:e.id}),l.order_change_list({orderNo:e.orderNo,type:2}),l.afterLoan_follow_up_list({orderNo:e.orderNo})]);case 15:return r=t.sent,i=(0,a.default)(r,3),c=i[0],d=i[1],p=i[2],t.next=22,s.setOrderTopData(4,c);case 22:return t.next=24,s.setRecordData(p);case 24:h=[],d.map((function(e){h.push(e.changeInfo)})),e.addHistory(h);case 27:case"end":return t.stop()}}),t)})))()},addBtnEvent:function(){var e=$("#submit"),t=$("#cancel"),n=$(".__date__"),r=this,o=(new Date).getTime();o=y.getDate1(o),n.eq(0).get(0).value=o,e.click((function(){s.showLoadingRun(r,"submitFn",1)})),t.click((function(){p.closeWin()}))},createBTitlesBtn:function(){var e=$("#mdf").get(0),t=this,n=this.clientCategory,r=this.clientCategoryDist,a=[];r.map((function(e){var t=e.value==n?e.name+"(当前)":e.name;a.push({name:t,type:e.value})})),a.shift(),e.btnData=[{name:"变更客户资料",type:"btn1",style:{color:"#5576f0"}},{name:"变更还款账号",type:"btn2",style:{color:"#5576f0"}},{name:"新增贷后支出",type:"btn3",style:{color:"#5576f0"}},{name:"核销",type:"btn4",style:{color:"#5576f0"}},{name:"展期",type:"btn5",style:{color:"#5576f0"}},{name:"客户分类",style:{color:"#5576f0"},children:a}],e.clickFn=function(){var e=(0,i.default)(o.default.mark((function e(n){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("btn1"!=n){e.next=3;break}return p.openPage("./o_mdf_user_info.html?id=".concat(t.id,"&orderNo=").concat(t.orderNo,"&currentNodeKey=").concat(t.currentNodeKey,"&clientCategory=").concat(t.clientCategory),h.o_mdf_user_info.width,h.o_mdf_user_info.height),e.abrupt("return");case 3:if("btn2"!=n){e.next=6;break}return p.openPage("./o_mdf_repayment_account.html?id=".concat(t.id,"&orderNo=").concat(t.orderNo,"&currentNodeKey=").concat(t.currentNodeKey,"&clientCategory=").concat(t.clientCategory),h.o_mdf_repayment_account.width,h.o_mdf_repayment_account.height),e.abrupt("return");case 6:if("btn3"!=n){e.next=9;break}return p.openPage("./o_add_after_loan.html?id=".concat(t.id,"&orderNo=").concat(t.orderNo,"&currentNodeKey=").concat(t.currentNodeKey,"&clientCategory=").concat(t.clientCategory),h.o_add_after_loan.width,h.o_add_after_loan.height),e.abrupt("return");case 9:if("btn4"!=n){e.next=12;break}return p.openPage("./o_write_off.html?id=".concat(t.id,"&orderNo=").concat(t.orderNo,"&currentNodeKey=").concat(t.currentNodeKey,"&clientCategory=").concat(t.clientCategory),h.o_write_off.width,h.o_write_off.height),e.abrupt("return");case 12:if("btn5"!=n){e.next=15;break}return p.openPage("./o_rollover.html?id=".concat(t.id,"&orderNo=").concat(t.orderNo,"&currentNodeKey=").concat(t.currentNodeKey,"&clientCategory=").concat(t.clientCategory),h.o_rollover.width,h.o_rollover.height),e.abrupt("return");case 15:s.showLoadingRun(t,"submitClientType",n);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},submitClientType:function(e){var t=this;return(0,i.default)(o.default.mark((function n(){var r,a,i;return o.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e!=t.clientCategory){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,u.send([l.afterLoan_change_user_type({orderNo:t.orderNo,category:e})]);case 4:return a=(new Date).getTime(),a=y.getDate1(a),i="".concat(a,",").concat(window.userName,'将客户分类从 "').concat(null!==(r=t.clientCategory)&&void 0!==r?r:"无",'"修改为"').concat(e,'"'),n.next=9,u.send([l.order_change_submit({changeInfoList:[i],orderNo:t.orderNo,type:2})]);case 9:return t.addHistory([i]),n.next=12,p.alert("操作成功！");case 12:t.clientCategory=e,t.createBTitlesBtn();case 14:case"end":return n.stop()}}),n)})))()},submitFn:function(e){var t=this;return(0,i.default)(o.default.mark((function n(){var r,a;return o.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.getFromGroupVal($("#form"));case 2:return r=n.sent,n.next=5,s.uploadFile(r.attachUrls);case 5:return a=n.sent,r.attachUrls=a.join(","),r.auditStatus=e,r.orderNo=t.orderNo,r.currentNodeKey=t.currentNodeKey,n.next=12,u.send([l.afterLoan_follow_up_save(r)]);case 12:return n.next=14,p.alert("保存成功!");case 14:p.closeWin();case 15:case"end":return n.stop()}}),n)})))()},addHistory:function(e){var t=$("#window_add");e.map((function(e){var n=$("<p>"+e+"</p>");t.append(n)}))}};window.showText=function(e){e=JSON.parse(e),m.addHistory([e])},c.run(m)},89:function(e,t,n){"use strict";var r=n(0),o=r(n(20)),a=r(n(36)),i=r(n(21)),c=r(n(24)),s=r(n(25)),d=r(n(23)),u=r(n(30));function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,d.default)(e);if(t){var o=(0,d.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var p=n(33),f=n(35),h="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAt0lEQVQ4T92SMQ7CMAxFv71wD07CCdjKhMSCGJCIMnIB9iSsjExELJyAUyF1IEaGpSopDSoTGWO9Z3/LhIGPBvJ4Ezi3rwCprDWzpty5cAIoWruJzf/sBG1JF6yirCCEMEqJpjrJqxtFZrkYY+p25HwEljkDy5RoogCzXFPCAaBjeQSWtUpUcBecSWjXhjsjaOG5B8YWImMIrXLwR4EWvfcLEb51wb2Ckhv5/SGVdO09pG8kfxDhASy0RBHeQ/qXAAAAAElFTkSuQmCC",g=["png","jpeg","jpg"],y=function(e){(0,c.default)(n,e);var t=l(n);function n(){var e;(0,o.default)(this,n),(e=t.call(this)).body=null,e.shadow=e.attachShadow({mode:"open"});var r=p("../res/css/all.css");e.shadow.appendChild(r),e.createStyle();var i=f(e.cssText);return e.shadow.appendChild(i),e.createElement(),e.descSort="desc"==$((0,a.default)(e)).attr("sort"),e.showOne="true"==$((0,a.default)(e)).attr("showOne"),e.imgClickFn=function(){},e.shadow.appendChild(e.body.get(0)),e}return(0,i.default)(n,[{key:"connectedCallback",value:function(){}}]),(0,i.default)(n,[{key:"createElement",value:function(){var e=$('<div class="body"></div>'),t=$('<div class="noDate box_hcc">暂无数据</div>'),n=$('<div class="showMore hover box_hcc"><span>查看更多</span></div>'),r=$('<div class="item box_hlt"></div>'),o=$('<div class="no box_hct"></div>'),a=($('<div class="name box_hlt"></div>'),$('<div class="state box_hcc"></div>'),$('<div class="info box_slt boxflex1"></div>')),i=$('<div class="text breakall"></div>'),c=$('<div class="img box_hlt box_lines"></div>'),s=$('<div class="date box_sct"></div>'),d=$('<div class="user box_sct"></div>');a.append(i).append(c),r.append(o).append(s).append(d).append(a),this.noDate=t,this.showMore=n,this.item=r,this.body=e}},{key:"createStyle",value:function(){var e=[".body{min-width:1000px;width:100%;}",".item{min-height:20px;padding:5px;line-height:20px;background:#e6e7e9;margin-bottom:5px;font-size:12px;color:#333;}",".no{width:60px;}",".noDate{font-size:14px; height:30px;}",".showMore{margin-bottom: 20px;height:30px;padding-top:10px;font-size:12px;color:#909192;}",".showMore span{padding:0 20px; position:relative;}",'.showMore span:before{content:"";display:block;position:absolute;left:0;top:50%;width:16px;height:16px;margin-top:-5px;background:url('+h+") no-repeat center center;background-size:100%;}",'.showMore span:after{content:"";display:block;position:absolute;right:0;top:50%;width:16px;height:16px;margin-top:-5px;background:url('+h+") no-repeat center center;background-size:100%;}",".hideMore span:before,.hideMore span:after{transform:rotate(180deg);margin-top:-10px;}",".name{width:160px;}",".state img{display:block;width:14px;height:14px;}",".text{}",".state{width:60px; min-height:20px;}",".img img{display:block;width:100%;height:100%;}",".img .file{width:40px;height:40px;margin:2px 2px;border:1px solid #ccc;line-height:16px;text-align:center;}",".date{width:100px;}",".user{width:100px;}"];this.cssText=e.join("")}},{key:"createRow",value:function(e,t){var n=this;e.find(".no").text(t.no),e.find(".text").text(t.info);var r=t.img||[],o=e.find(".img");r.map((function(e){var t=(e=e.toLowerCase()).split(".");t=t[t.length-1];var r=$("<div></div>");if(r.addClass("hover").addClass("file").attr({src:e}),g.indexOf(t)>-1){var a=new Image;a.src=e,r.append(a)}else r.addClass("box_hcc"),r.html(t+"<br/>文件");o.append(r);var i=n;$(r).click((function(){var e=$(this).attr("src");i.imgClickFn(e)}))})),e.find(".date").text(t.date),e.find(".user").text(t.user)}},{key:"data",set:function(e){var t=this;if(this.body.find("img").unbind("click"),this.showMore.unbind("click"),this.body.html(""),e=e||[],this.descSort&&(e=e.reverse()),0!=e.length){var n=this.body,r=this.item;if(e.map((function(e){var o=r.clone();t.createRow(o,e),n.append(o)})),this.showOne&&e.length>1){var o=this.body.find(".item"),a=function(){o.addClass("hidden"),o.eq(0).removeClass("hidden")};a(),this.body.append(this.showMore),this.showMore.click((function(){$(this).hasClass("hideMore")?(a(),$(this).removeClass("hideMore").find("span").text("查看更多")):(o.removeClass("hidden"),$(this).addClass("hideMore").find("span").text("收起更多"))}))}}else this.body.append(this.noDate)}},{key:"imgClick",set:function(e){e=e||function(){},this.imgClickFn=e}}]),n}((0,u.default)(HTMLElement));customElements.get("b-follow-record")||customElements.define("b-follow-record",y)}});